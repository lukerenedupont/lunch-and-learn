<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>I Finally Built the Thing</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,400&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

    :root {
      --bg: #090909;
      --surface: #111;
      --surface2: #161616;
      --border: #1e1e1e;
      --text: #f0f0f0;
      --muted: #666;
      --accent: #6366f1;
      --accent-dim: rgba(99,102,241,0.12);
      --amber: #f59e0b;
      --amber-dim: rgba(245,158,11,0.12);
      --green: #10b981;
      --green-dim: rgba(16,185,129,0.12);
      --red: #ef4444;
      --red-dim: rgba(239,68,68,0.12);
    }

    html, body {
      width: 100%; height: 100%;
      overflow: hidden;
      background: var(--bg);
      color: var(--text);
      font-family: 'Inter', -apple-system, sans-serif;
      -webkit-font-smoothing: antialiased;
    }

    /* ── chrome ── */
    #progress {
      position: fixed; top: 0; left: 0;
      height: 2px; background: var(--accent);
      transition: width 0.5s cubic-bezier(0.4,0,0.2,1);
      z-index: 100;
    }
    #counter {
      position: fixed; bottom: 32px; right: 40px;
      font-size: 12px; color: var(--muted);
      font-weight: 500; letter-spacing: 0.06em;
      font-variant-numeric: tabular-nums; z-index: 100;
    }
    #nav-hint {
      position: fixed; bottom: 28px; left: 40px;
      display: flex; align-items: center; gap: 6px; z-index: 100;
    }
    .nav-arrow {
      display: inline-flex; align-items: center; justify-content: center;
      width: 36px; height: 36px; border-radius: 8px;
      background: var(--surface); border: 1px solid var(--border);
      color: var(--muted); font-size: 16px; cursor: pointer;
      transition: background 0.15s, color 0.15s, border-color 0.15s;
    }
    .nav-arrow:hover { background: var(--surface2); color: var(--text); border-color: #444; }

    /* ── slides ── */
    #deck { width: 100%; height: 100%; position: relative; }

    .slide {
      position: absolute; inset: 0;
      display: flex; flex-direction: column;
      justify-content: center; align-items: flex-start;
      padding: 80px 120px;
      opacity: 0;
      transition: opacity 0.4s ease;
      pointer-events: none;
    }
    .slide.active { opacity: 1; pointer-events: all; }
    .slide.centered { align-items: center; text-align: center; }

    /* ── chapter breaks ── */
    .slide.chapter {
      align-items: center; text-align: center;
      background: var(--bg);
    }
    .chapter-num {
      font-size: 11px; font-weight: 600;
      letter-spacing: 0.15em; text-transform: uppercase;
      color: var(--muted); margin-bottom: 20px;
    }
    .chapter-title {
      font-size: clamp(42px, 6vw, 84px);
      font-weight: 800; letter-spacing: -0.03em;
      line-height: 1.05;
    }
    .chapter-sub {
      margin-top: 20px; font-size: 18px;
      color: var(--muted); max-width: 40ch;
    }
    .chapter-line {
      width: 1px; height: 60px;
      background: var(--border);
      margin: 32px auto;
    }

    /* ── demo slides ── */
    .slide.demo { border-left: 2px solid var(--amber); }
    .demo-badge {
      display: inline-flex; align-items: center; gap: 10px;
      background: var(--amber-dim);
      border: 1px solid var(--amber);
      border-radius: 100px; padding: 7px 16px;
      font-size: 12px; font-weight: 600;
      color: var(--amber); letter-spacing: 0.08em;
      text-transform: uppercase; margin-bottom: 28px;
    }
    .demo-badge .pulse {
      width: 8px; height: 8px; border-radius: 50%;
      background: var(--amber);
      animation: pulse 1.5s ease-in-out infinite;
    }
    @keyframes pulse {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.4; transform: scale(0.8); }
    }

    /* ── discussion slides ── */
    .slide.discussion { border-left: 2px solid var(--green); }
    .discussion-badge {
      display: inline-flex; align-items: center; gap: 10px;
      background: var(--green-dim);
      border: 1px solid var(--green);
      border-radius: 100px; padding: 7px 16px;
      font-size: 12px; font-weight: 600;
      color: var(--green); letter-spacing: 0.08em;
      text-transform: uppercase; margin-bottom: 28px;
    }

    /* ── typography ── */
    .eyebrow {
      font-size: 11px; font-weight: 600;
      letter-spacing: 0.12em; text-transform: uppercase;
      color: var(--accent); margin-bottom: 20px;
    }
    .eyebrow.amber { color: var(--amber); }
    .eyebrow.green { color: var(--green); }
    .eyebrow.red   { color: var(--red); }
    .eyebrow.muted { color: var(--muted); }

    h1 {
      font-size: clamp(52px, 7vw, 100px);
      font-weight: 800; line-height: 1.04; letter-spacing: -0.03em;
    }
    h2 {
      font-size: clamp(36px, 4.5vw, 68px);
      font-weight: 700; line-height: 1.08; letter-spacing: -0.025em;
    }
    .subtitle {
      margin-top: 24px;
      font-size: clamp(16px, 1.8vw, 22px);
      color: var(--muted); line-height: 1.6; max-width: 52ch;
    }
    .big-quote {
      font-size: clamp(30px, 4vw, 56px);
      font-weight: 700; line-height: 1.15;
      letter-spacing: -0.02em; max-width: 22ch; font-style: italic;
    }
    .divider { width: 40px; height: 2px; background: var(--border); margin: 32px 0; }
    .centered .divider { margin: 32px auto; }
    em { font-style: italic; color: var(--text); }

    /* ── chat bubbles ── */
    .chat-wrap { display: flex; flex-direction: column; gap: 14px; margin-top: 36px; max-width: 620px; }

    .bubble {
      background: var(--surface); border: 1px solid var(--border);
      border-radius: 4px 14px 14px 14px;
      padding: 14px 20px; font-size: 15px;
      line-height: 1.55; color: var(--text);
    }
    .bubble .who {
      display: block; font-size: 10px; font-weight: 600;
      letter-spacing: 0.1em; text-transform: uppercase;
      color: var(--muted); margin-bottom: 8px;
    }
    .bubble .who.you { color: var(--accent); }
    .bubble em { color: var(--muted); font-style: normal; font-size: 13px; }

    /* ── step items (animated reveal) ── */
    .step-item {
      opacity: 0; transform: translateY(10px);
      transition: opacity 0.35s ease, transform 0.35s ease;
    }
    .step-item.visible { opacity: 1; transform: translateY(0); }

    /* ── tags ── */
    .tags { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 32px; }
    .tag {
      display: inline-flex; align-items: center; gap: 8px;
      padding: 8px 16px; background: var(--surface);
      border: 1px solid var(--border); border-radius: 100px;
      font-size: 14px; font-weight: 500; color: var(--muted);
    }
    .dot { width: 6px; height: 6px; border-radius: 50%; background: var(--accent); }
    .dot.amber { background: var(--amber); }

    /* ── numbered steps ── */
    .steps { display: flex; flex-direction: column; gap: 24px; margin-top: 40px; max-width: 620px; }
    .step { display: flex; align-items: flex-start; gap: 20px; }
    .step-num {
      width: 36px; height: 36px; border-radius: 50%;
      border: 1px solid var(--border);
      display: flex; align-items: center; justify-content: center;
      font-size: 13px; font-weight: 600; color: var(--accent); flex-shrink: 0;
    }
    .step-content h4 { font-size: 18px; font-weight: 600; margin-bottom: 5px; }
    .step-content p  { font-size: 14px; color: var(--muted); line-height: 1.65; }

    /* ── cards ── */
    .cards {
      display: grid; grid-template-columns: repeat(3, 1fr);
      gap: 14px; margin-top: 40px; width: 100%; max-width: 900px;
    }
    .card {
      background: var(--surface); border: 1px solid var(--border);
      border-radius: 16px; padding: 24px;
    }
    .card-title { font-size: 15px; font-weight: 600; margin-bottom: 6px; }
    .card-desc  { font-size: 13px; color: var(--muted); line-height: 1.65; }
    .card.landed { border-color: rgba(99,102,241,0.25); }

    /* ── comparison ── */
    .comparison {
      display: grid; grid-template-columns: 1fr 1fr;
      gap: 20px; margin-top: 40px; width: 100%; max-width: 820px;
    }
    .compare-col {
      background: var(--surface); border-radius: 16px; padding: 28px;
    }
    .compare-col.bad  { border: 1px solid rgba(239,68,68,0.25); }
    .compare-col.good { border: 1px solid rgba(16,185,129,0.25); }
    .compare-label {
      font-size: 11px; font-weight: 600;
      letter-spacing: 0.1em; text-transform: uppercase;
      margin-bottom: 14px; display: block;
    }
    .compare-col.bad  .compare-label { color: var(--red); }
    .compare-col.good .compare-label { color: var(--green); }
    .compare-col p { font-size: 15px; line-height: 1.65; color: var(--muted); }

    /* ── debug timeline ── */
    .debug-list { display: flex; flex-direction: column; gap: 10px; margin-top: 32px; max-width: 700px; }
    .debug-row {
      display: flex; align-items: center; gap: 16px;
      padding: 12px 18px; background: var(--surface);
      border: 1px solid var(--border); border-radius: 10px;
      font-size: 14px; color: var(--muted);
    }
    .debug-row .attempt {
      font-size: 11px; font-weight: 600; letter-spacing: 0.08em;
      text-transform: uppercase; color: var(--red); flex-shrink: 0;
    }
    .debug-row.success { border-color: rgba(16,185,129,0.3); color: var(--text); }
    .debug-row.success .attempt { color: var(--green); }

    /* ── pill grid (card overview) ── */
    .pill-grid { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 36px; max-width: 700px; }
    .pill {
      display: inline-flex; align-items: center; gap: 8px;
      padding: 10px 18px; border-radius: 100px;
      font-size: 14px; font-weight: 500;
    }
    .pill.killed { background: var(--red-dim); border: 1px solid rgba(239,68,68,0.2); color: var(--red); }
    .pill.landed { background: var(--accent-dim); border: 1px solid rgba(99,102,241,0.25); color: var(--accent); }
    .pill.side   { background: var(--amber-dim); border: 1px solid rgba(245,158,11,0.25); color: var(--amber); }

    /* ── evolution arc ── */
    .evolution {
      display: grid; grid-template-columns: repeat(3, 1fr);
      gap: 16px; margin-top: 40px; width: 100%; max-width: 900px;
    }
    .evo-col {
      background: var(--surface); border: 1px solid var(--border);
      border-radius: 16px; padding: 26px;
    }
    .evo-week {
      font-size: 11px; font-weight: 600; letter-spacing: 0.1em;
      text-transform: uppercase; color: var(--muted); margin-bottom: 14px;
    }
    .evo-stage {
      font-size: 20px; font-weight: 700; margin-bottom: 14px; letter-spacing: -0.01em;
    }
    .evo-quote {
      font-size: 13px; color: var(--muted); line-height: 1.65;
      font-style: italic; border-left: 2px solid var(--border);
      padding-left: 12px; margin-bottom: 10px;
    }

    /* ── waffle chart ── */
    .waffle { display: flex; flex-wrap: wrap; gap: 2px; width: 510px; flex-shrink: 0; align-content: flex-start; }
    .wd { display: block; width: 8px; height: 8px; border-radius: 1.5px; flex-shrink: 0; }
    .wn { background: var(--border); }
    .wf { background: var(--green); opacity: 0.7; }
    .wp { background: var(--amber); }
    .wc { background: var(--red); }
    .waffle-legend { display: flex; flex-direction: column; gap: 12px; margin-top: 32px; }
    .wl-row { display: flex; align-items: center; gap: 10px; font-size: 14px; color: var(--muted); }
    .wl-row .wd { width: 10px; height: 10px; opacity: 1; }
    .wl-row .wf { opacity: 0.7; }
    @media (max-width: 768px) { .waffle { display: none; } }

    /* ── light mode ── */
    body.light {
      --bg: #f7f7f5;
      --surface: #ffffff;
      --surface2: #efefed;
      --border: #e2e2e2;
      --text: #111111;
      --muted: #888888;
    }
    /* ── grid button ── */
    #grid-btn {
      position: fixed; bottom: 70px; left: 86px;
      width: 36px; height: 36px; border-radius: 50%;
      background: var(--surface); border: 1px solid var(--border);
      color: var(--muted);
      cursor: pointer; display: flex; align-items: center; justify-content: center;
      z-index: 100; transition: background 0.2s, color 0.2s, border-color 0.2s;
    }
    #grid-btn:hover { background: var(--surface2); color: var(--text); border-color: #444; }
    .grid-icon { display: grid; grid-template-columns: 1fr 1fr; gap: 3px; width: 12px; height: 12px; }
    .grid-icon span { display: block; border-radius: 1.5px; background: currentColor; }

    /* ── grid overlay ── */
    #grid-overlay {
      position: fixed; inset: 0;
      background: rgba(4,4,4,0.94);
      backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px);
      z-index: 900; opacity: 0;
      transition: opacity 0.22s ease;
      overflow-y: auto;
      display: flex; align-items: flex-start; justify-content: center;
    }
    #grid-overlay.visible { opacity: 1; }
    body.light #grid-overlay { background: rgba(180,180,178,0.94); }

    #grid-container {
      display: flex; flex-wrap: wrap; gap: 10px;
      padding: 52px; justify-content: center; align-content: flex-start;
    }
    .thumb-wrap {
      position: relative; border-radius: 10px; overflow: visible;
      cursor: pointer; border: 2px solid transparent; flex-shrink: 0;
      opacity: 0; transform: scale(0.86) translateY(8px);
      transition: opacity 0.3s cubic-bezier(0.34,1.56,0.64,1),
                  transform 0.3s cubic-bezier(0.34,1.56,0.64,1),
                  border-color 0.15s ease;
    }
    .thumb-wrap.in { opacity: 1; transform: scale(1) translateY(0); }
    .thumb-wrap.thumb-current { border-color: var(--accent); }
    .thumb-wrap:hover:not(.thumb-current) { border-color: rgba(255,255,255,0.22); }
    body.light .thumb-wrap:hover:not(.thumb-current) { border-color: rgba(0,0,0,0.22); }
    .thumb-clip { position: absolute; inset: 0; border-radius: 8px; overflow: hidden; }
    .thumb-slide { position: absolute; top: 0; left: 0; transform-origin: top left; pointer-events: none; background: var(--bg); }
    .thumb-num {
      position: absolute; bottom: 5px; right: 7px;
      font-size: 9px; font-weight: 600; letter-spacing: 0.04em;
      color: rgba(255,255,255,0.28); font-family: inherit;
      font-variant-numeric: tabular-nums;
    }
    body.light .thumb-num { color: rgba(0,0,0,0.28); }
    .thumb-insert {
      position: absolute; right: -7px; top: 0; bottom: 0; width: 14px;
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      background: none; border: none; padding: 0;
      cursor: pointer; opacity: 0; transition: opacity 0.15s; z-index: 200;
    }
    .thumb-insert::before {
      content: ''; position: absolute; top: 0; bottom: 0; left: 50%;
      transform: translateX(-50%); width: 2px;
      background: var(--accent); border-radius: 1px;
    }
    .ins-dot {
      width: 22px; height: 22px; border-radius: 50%; flex-shrink: 0;
      background: var(--accent); color: #fff; font-size: 17px; line-height: 1;
      display: flex; align-items: center; justify-content: center;
      position: relative; z-index: 1; pointer-events: none;
    }
    .thumb-wrap:hover .thumb-insert { opacity: 1; }
    .thumb-delete {
      position: absolute; top: -6px; right: -6px;
      width: 18px; height: 18px; border-radius: 50%;
      background: var(--red); border: none; color: #fff;
      font-size: 13px; line-height: 1; padding: 0;
      cursor: pointer; opacity: 0; transition: opacity 0.15s; z-index: 200;
      display: flex; align-items: center; justify-content: center;
    }
    .thumb-wrap:hover .thumb-delete { opacity: 1; }

    /* ── theme toggle ── */
    #theme-btn {
      position: fixed; bottom: 70px; left: 40px;
      width: 36px; height: 36px; border-radius: 50%;
      background: var(--surface); border: 1px solid var(--border);
      color: var(--muted); font-size: 15px;
      cursor: pointer; display: flex; align-items: center; justify-content: center;
      z-index: 100; transition: background 0.2s, color 0.2s, border-color 0.2s;
    }
    #theme-btn:hover { background: var(--surface2); color: var(--text); border-color: #aaa; }

    /* ── add media button ── */
    #add-btn {
      position: fixed; bottom: 70px; right: 40px;
      width: 36px; height: 36px; border-radius: 50%;
      background: var(--surface); border: 1px solid var(--border);
      color: var(--muted); font-size: 22px; line-height: 1;
      cursor: pointer; display: flex; align-items: center; justify-content: center;
      z-index: 100; transition: background 0.2s, color 0.2s, border-color 0.2s;
    }
    #add-btn:hover { background: var(--surface2); color: var(--text); border-color: #444; }

    /* ── slide media panel ── */
    .slide.blank-slide {
      align-items: center; justify-content: center; cursor: pointer;
    }
    .slide.blank-slide .blank-hint {
      display: flex; flex-direction: column; align-items: center; gap: 16px;
      color: var(--border); pointer-events: none; user-select: none;
      transition: color 0.2s;
    }
    .slide.blank-slide:hover .blank-hint { color: var(--muted); }
    .blank-hint-icon {
      width: 56px; height: 56px; border-radius: 50%;
      border: 2px dashed currentColor;
      display: flex; align-items: center; justify-content: center;
      font-size: 28px; line-height: 1;
    }
    .blank-hint p { font-size: 13px; letter-spacing: 0.03em; margin: 0; }

    .slide-media {
      position: absolute;
      max-width: 44%; max-height: 78%;
      border-radius: 16px; overflow: hidden;
      box-shadow: 0 24px 64px rgba(0,0,0,0.6);
      z-index: 10; cursor: grab; user-select: none;
    }
    .slide-media.dragging { cursor: grabbing; box-shadow: 0 32px 80px rgba(0,0,0,0.75); }
    .snap-guide {
      position: fixed; pointer-events: none; z-index: 9999;
      background: #60a5fa; opacity: 0; transition: opacity 0.08s;
    }
    .snap-guide.h { left: 0; right: 0; height: 1px; top: 50%; }
    .snap-guide.v { top: 0; bottom: 0; width: 1px; left: 50%; }
    .snap-guide.visible { opacity: 1; }

    #draw-canvas {
      position: fixed; inset: 0; width: 100%; height: 100%;
      pointer-events: none; z-index: 50;
    }
    body.pen-mode #draw-canvas { pointer-events: all; cursor: crosshair; }
    body.pen-mode .slide-media { pointer-events: none; }
    #pen-btn.pen-active { background: var(--accent); color: #fff; border-color: var(--accent); }

    .title-letter {
      display: inline-block;
      overflow: visible;
      vertical-align: bottom;
      transition: transform 0.07s ease, color 0.05s;
      cursor: default;
    }
    .title-letter.lifted {
      transform: translateY(-8px) scale(1.18);
      color: var(--accent);
    }

    [contenteditable="true"] {
      outline: none; cursor: text;
      border-radius: 4px;
      box-shadow: 0 0 0 2px rgba(96,165,250,0.5);
      caret-color: #60a5fa;
    }
    .slide-media img, .slide-media video {
      width: 100%; height: 100%; object-fit: cover; display: block; pointer-events: none;
    }
    .slide-media video { max-height: 60vh; }
    .media-remove {
      position: absolute; top: 10px; right: 10px;
      width: 28px; height: 28px; border-radius: 50%;
      background: rgba(0,0,0,0.75); border: 1px solid rgba(255,255,255,0.12);
      color: #fff; font-size: 16px; cursor: pointer;
      display: flex; align-items: center; justify-content: center;
      opacity: 0; transition: opacity 0.2s;
    }
    .slide-media:hover .media-remove { opacity: 1; }
    .media-resize {
      position: absolute; bottom: 0; right: 0;
      width: 24px; height: 24px; cursor: nwse-resize; z-index: 2;
    }
    .media-resize::after {
      content: '';
      position: absolute; bottom: 6px; right: 6px;
      width: 9px; height: 9px;
      border-right: 2px solid rgba(255,255,255,0.35);
      border-bottom: 2px solid rgba(255,255,255,0.35);
      opacity: 0; transition: opacity 0.2s;
    }
    .slide-media:hover .media-resize::after { opacity: 1; }
    .slide-media.selected { outline: 2px solid var(--accent); outline-offset: 2px; }
    .media-layer-badge {
      position: absolute; bottom: 8px; left: 8px;
      background: rgba(0,0,0,0.75); border: 1px solid rgba(255,255,255,0.12);
      border-radius: 4px; padding: 3px 8px;
      font-size: 10px; font-weight: 600; color: #fff;
      letter-spacing: 0.06em; opacity: 0;
      transition: opacity 0.15s; pointer-events: none;
    }
    .slide-media.selected .media-layer-badge { opacity: 1; }

    /* ── drop overlay ── */
    #drop-overlay {
      position: fixed; inset: 0;
      background: rgba(99,102,241,0.05);
      border: 2px dashed rgba(99,102,241,0.35);
      display: flex; align-items: center; justify-content: center;
      font-size: 15px; font-weight: 600; color: var(--accent);
      letter-spacing: 0.1em; text-transform: uppercase;
      z-index: 500; pointer-events: none;
      opacity: 0; transition: opacity 0.15s;
    }
    #drop-overlay.visible { opacity: 1; }

    /* ── speaker notes ── */
    #notes-bar {
      position: fixed; bottom: 0; left: 0; right: 0;
      background: rgba(0,0,0,0.92);
      backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
      border-top: 1px solid rgba(255,255,255,0.08);
      padding: 20px 40px; z-index: 80;
      max-height: 30vh; overflow-y: auto;
      transform: translateY(100%);
      transition: transform 0.25s ease;
    }
    #notes-bar.visible { transform: translateY(0); }
    #notes-bar .notes-label {
      font-size: 10px; font-weight: 600;
      letter-spacing: 0.12em; text-transform: uppercase;
      color: #555; margin-bottom: 10px;
    }
    #notes-bar .notes-text {
      font-size: 15px; line-height: 1.7; color: #ccc;
    }
    #notes-bar .notes-text strong { color: #f0f0f0; }
    #notes-bar .notes-key { display: inline-block; padding: 1px 6px; border: 1px solid #333; border-radius: 3px; font-size: 10px; color: #555; margin-left: 6px; }
    body.light #notes-bar {
      background: rgba(255,255,255,0.94);
      border-top-color: rgba(0,0,0,0.08);
    }
    body.light #notes-bar .notes-label { color: #999; }
    body.light #notes-bar .notes-text { color: #555; }
    body.light #notes-bar .notes-text strong { color: #111; }

    /* ── mobile ── */
    @media (max-width: 768px) {
      .slide { padding: 44px 32px; }
      #nav-hint { display: none; }
      #counter { bottom: 20px; right: 24px; }
      #add-btn, #theme-btn, #grid-btn { bottom: 56px; }
      #add-btn { right: 24px; }
      #theme-btn { left: 24px; }
      #grid-btn { left: 68px; }

      h1 { font-size: clamp(36px, 11vw, 64px); }
      h2 { font-size: clamp(26px, 8vw, 44px); }
      .big-quote { font-size: clamp(24px, 7vw, 40px); }
      .subtitle { font-size: clamp(14px, 4vw, 18px); }
      .chapter-title { font-size: clamp(32px, 10vw, 56px); }
      .cards { grid-template-columns: 1fr 1fr; gap: 10px; }
      .comparison { grid-template-columns: 1fr; gap: 12px; }
      .evolution { grid-template-columns: 1fr; gap: 10px; }
      .steps { max-width: 100%; }
      .chat-wrap { max-width: 100%; }
      .pill-grid { max-width: 100%; }
      .step-content h4 { font-size: 15px; }
      .step-content p { font-size: 13px; }
      .bubble { font-size: 13px; padding: 12px 14px; }
    }

    @media (max-width: 480px) {
      .slide { padding: 36px 24px; }
      .cards { grid-template-columns: 1fr; }
      .evolution .evo-col { padding: 18px; }
    }

  </style>
</head>
<body>

<div id="progress"></div>
<div id="counter">1 / 39</div>
<button id="grid-btn" title="Slide overview"><span class="grid-icon"><span></span><span></span><span></span><span></span></span></button>
<button id="theme-btn" title="Toggle light mode">◑</button>
<button id="add-btn" title="Add image or video to this slide">+</button>
<input type="file" id="media-input" accept="image/*,video/*" style="display:none">
<div id="drop-overlay">drop to add to this slide</div>
<div id="nav-hint">
  <button class="nav-arrow" id="prev-btn" title="Previous (←)">&#8592;</button>
  <button class="nav-arrow" id="next-btn" title="Next (→)">&#8594;</button>
  <button class="nav-arrow" id="pen-btn" title="Draw mode (P)">✏️</button>
  <button class="nav-arrow" id="clear-btn" title="Clear drawing on this slide" style="display:none">⌫</button>
</div>
<canvas id="draw-canvas"></canvas>
<div id="notes-bar">
  <div class="notes-label">Speaker Notes (N to toggle)</div>
  <div class="notes-text" id="notes-text"></div>
</div>

<div id="deck">

  <!-- 1 · Title -->
  <div class="slide active" data-slide="0" data-notes="<strong>Set the tone — casual, honest.</strong> Quick intro: this is about what happened when I actually tried building things with AI tools instead of just using them. Two years of playing around, one real project that changed everything.">
    <div class="eyebrow muted">Lunch &amp; Learn — Feb 2026</div>
    <h1>I Finally<br>Built the<br>Thing.</h1>
    <p class="subtitle">two years of using AI tools. one real project. here's what actually happened.</p>
  </div>

  <!-- 2 · Confession -->
  <div class="slide" data-slide="1" data-notes="<strong>Be honest here.</strong> Let the quote sit. Everyone in the room has felt this. Pause after 'nothing I could actually ship.' Let them nod.">
    <p class="big-quote">"for two years I was using AI.<br>I wasn't actually<br>building anything."</p>
    <div class="divider"></div>
    <p class="subtitle">good ideas. great figma files. nothing i could actually ship.</p>
  </div>

  <!-- 3 · The gap -->
  <div class="slide" data-slide="2" data-steps="2" data-notes="Walk through the tags — these are all things I was doing. They felt productive. Then reveal the red tag: nothing shipped. Pause. Then the subtitle: I was watching other people build real things.">
    <div class="eyebrow muted">what i was doing</div>
    <h2>using it.<br>not building with it.</h2>
    <div class="tags" style="margin-top:32px">
      <div class="tag"><span class="dot"></span>chat</div>
      <div class="tag"><span class="dot"></span>image generation</div>
      <div class="tag"><span class="dot amber"></span>figma + ai</div>
      <div class="tag"><span class="dot amber"></span>brainstorming</div>
      <div class="tag step-item" data-step="1" style="border-color:rgba(239,68,68,0.25);background:var(--red-dim)"><span class="dot" style="background:var(--red)"></span>nothing shipped</div>
    </div>
    <p class="subtitle step-item" data-step="2" style="margin-top:32px">i was watching people build real things and feeling like i was missing something obvious.</p>
  </div>

  <!-- 4 · Catalyst -->
  <div class="slide" data-slide="3" data-steps="2" data-notes="<strong>The turning point.</strong> The home feed project. Interactive card explorations. Ideas that had been sitting in Figma for months. This was the push — a real brief, real stakes.">
    <div class="eyebrow amber">what changed</div>
    <h2>a real project landed<br>and I had no excuse<br>not to try.</h2>
    <p class="subtitle step-item" data-step="1" style="margin-top:24px">rethinking the home feed. new interactive card models. ideas that had been sitting in figma for months.</p>
    <p class="subtitle step-item" data-step="2" style="margin-top:16px;color:var(--text)">which was exactly the push i needed.</p>
  </div>

  <!-- 5 · Everything at a glance -->
  <div class="slide" data-slide="4" data-notes="<strong>Quick overview.</strong> Point at the colors: purple = shipped, amber = side projects, red = killed. About two weeks of work total. 'Let me show you' — transition into the demos chapter.">
    <div class="eyebrow muted">about two weeks later</div>
    <h2>here's what I built.</h2>
    <div class="pill-grid" style="margin-top:36px">
      <span class="pill landed">Shop Similar</span>
      <span class="pill landed">Arc Carousel</span>
      <span class="pill landed">Shop the Look</span>
      <span class="pill landed">Spin the Wheel</span>
      <span class="pill landed">Pong card</span>
      <span class="pill side">this presentation</span>
      <span class="pill side">design studio tracker</span>
    </div>
    <p class="subtitle" style="margin-top:28px">let me show you.</p>
  </div>

  <!-- ═══ CHAPTER 01 ═══ -->

  <!-- 6 · Chapter break -->
  <div class="slide chapter" data-slide="5" data-notes="Chapter break. Let the room reset. Quick breath.">
    <div class="chapter-num">01 —</div>
    <div class="chapter-line"></div>
    <div class="chapter-title">the work.</div>
    <p class="chapter-sub">five cards, two side projects, zero swift experience.</p>
  </div>
  <!-- 7 · Why code, not Figma -->
  <div class="slide" data-slide="6" data-steps="2" data-notes="<strong>Important framing.</strong> This isn't anti-Figma. It's about the right tool for the question. When the question is 'how does this feel?' — code is the only way to answer it. That made this the perfect project to try.">
    <div class="eyebrow muted">why not figma</div>
    <h2>i'm faster in figma.<br>except when the question<br>is how something <em>feels</em>.</h2>
    <p class="subtitle step-item" data-step="1" style="margin-top:24px">the brief was about interactivity — rethinking how cards respond, move, behave. figma can sketch that. but it can't answer it.</p>
    <p class="subtitle step-item" data-step="2" style="margin-top:16px;color:var(--text)">code can. and that made this the perfect project to finally just dive in.</p>
  </div>


  <!-- 8 · Day one -->
  <div class="slide" data-slide="7" data-steps="2" data-notes="<strong>The magic moment.</strong> Figma URL → running SwiftUI in one session. Still don't know Swift. Emphasize the workflow: describe, look at it, redirect. That's it.">
    <div class="eyebrow muted">day one</div>
    <h2>figma URL →<br>running SwiftUI app.<br>one session.</h2>
    <p class="subtitle step-item" data-step="1" style="margin-top:24px">header, search bar, filter chips, frosted glass effects, design tokens. all matched to the figma specs. i still don't know any swift.</p>
    <p class="subtitle step-item" data-step="2" style="margin-top:16px;color:var(--text)">the workflow: describe what you want. look at it. redirect. that's literally it.</p>
  </div>

  <!-- 9 · Not writing code -->
  <div class="slide" data-slide="8" data-notes="Let the chat bubbles speak for themselves. These are real prompts — plain English, not code. The point: you don't need to know the language, you need to know what you want.">
    <h2>not writing code.<br>just <em>describing</em><br>what I wanted.</h2>
    <div class="chat-wrap" style="margin-top:36px">
      <div class="bubble">
        <span class="who you">you</span>
        "lets start just with the header"
      </div>
      <div class="bubble">
        <span class="who you">you</span>
        "this is not the right size and its getting cropped"
      </div>
      <div class="bubble">
        <span class="who you">you</span>
        "the bell button should be the same style as the other pills"
      </div>
    </div>
  </div>

  <!-- 10 · Shop Similar -->
  <div class="slide" data-slide="9" data-steps="2" data-notes="<strong>Card 1.</strong> Show the video if you have it. Key detail: the shared element transition — one prompt to get iOS-style springs, custom offset/opacity. Completely nailed it.">
    <div class="eyebrow muted">card 01</div>
    <h2>Shop Similar</h2>
    <p class="subtitle" style="margin-top:16px">tap a product in the feed — the card fans into a 3×3 grid of similar items. tap one and it zooms in with a shared element transition, drops you to PDP. fully native, with haptics.</p>
    <div class="chat-wrap step-item" data-step="1" style="margin-top:28px">
      <div class="bubble">
        <span class="who you">you</span>
        "almost. not smooth enough yet. shared transition like an apple ios app"
      </div>
    </div>
    <p class="subtitle step-item" data-step="2" style="margin-top:20px;color:var(--text)">custom offset/size/opacity with iOS-style springs. one prompt, completely nailed it.</p>
  </div>

  <!-- 11 · Arc Carousel -->
  <div class="slide" data-slide="10" data-steps="2" data-notes="<strong>Card 2.</strong> Based on the A24 design reference. Key story: it went wrong, said 'go back,' reverted, tried again, got it in 5 minutes. Git means you can always go back.">
    <div class="eyebrow muted">card 02</div>
    <h2>Collection Pocket<br>Arc Carousel</h2>
    <p class="subtitle" style="margin-top:16px">products fanned out in an arc like a hand of cards — based on the A24 design reference. frosted glass, peek-behind layering, draggable cycling, color-grouped.</p>
    <div class="chat-wrap step-item" data-step="1" style="margin-top:28px">
      <div class="bubble">
        <span class="who you">you</span>
        "nope this is not what i wanted. go back to the last version"
      </div>
    </div>
    <p class="subtitle step-item" data-step="2" style="margin-top:20px;color:var(--text)">reverted, tried again, got it. the whole loop was maybe five minutes. git means you can always go back.</p>
  </div>

  <!-- 12 · Shop the Look -->
  <div class="slide" data-slide="11" data-steps="2" data-notes="<strong>Card 3.</strong> Started simple with hotspot dots, kept building. Evolved into multi-outfit carousel. The takeaway: kept going past where it needed to be, just because it was fun. That's the energy.">
    <div class="eyebrow muted">card 03</div>
    <h2>Shop the Look</h2>
    <p class="subtitle" style="margin-top:16px">outfit hero image with tappable hotspot dots mapped to each product in the photo. tap a dot — a floating product card slides in with name, price, and add to cart.</p>
    <p class="subtitle step-item" data-step="1" style="margin-top:20px">started simple. kept going. evolved into a swipeable carousel of multiple outfits with a full product rack below and transitions between looks.</p>
    <p class="subtitle step-item" data-step="2" style="margin-top:16px;color:var(--text)">this one i kept building past where it needed to be. just because it was fun.</p>
  </div>

  <!-- 13 · Spin the Wheel -->
  <div class="slide" data-slide="12" data-steps="2" data-notes="<strong>Card 4.</strong> The one with the best 'feel.' Haptic rhythm on each wheel segment click. Confetti on reveal. This card made me realize: the only constraint I had before was not being able to ship.">
    <div class="eyebrow muted">card 04</div>
    <h2>Spin the Wheel</h2>
    <p class="subtitle" style="margin-top:16px">gamified discount mechanic. prize wheel — spin it, real physics deceleration, haptic pulse on each segment click, dramatic reveal. the kind of thing you can only evaluate by feeling it.</p>
    <p class="subtitle step-item" data-step="1" style="margin-top:20px">full CTA wiring, press feedback, confetti on reveal. getting the haptic rhythm right took a few passes but it felt incredible when it landed.</p>
    <p class="subtitle step-item" data-step="2" style="margin-top:16px;color:var(--text)">this is the one that made me realise: the only constraint i had before was not being able to ship things myself.</p>
  </div>

  <!-- 14 · Pong -->
  <div class="slide" data-slide="13" data-steps="2" data-notes="<strong>Card 5 — the wildcard.</strong> A full Breakout game in a feed card. It worked great… until it didn't. Tease the debugging story that comes later in chapter 3.">
    <div class="eyebrow muted">card 05 — the wildcard</div>
    <h2>a full Breakout game<br>embedded in a feed card.</h2>
    <p class="subtitle step-item" data-step="1" style="margin-top:24px">paddle, ball, head-cutout bricks, prize product reveal when you clear all the blocks.</p>
    <p class="subtitle step-item" data-step="2" style="margin-top:16px;color:var(--text)">it worked great. and then i moved the paddle 36 points and everything broke.</p>
  </div>

  <!-- 15 · Live Demo -->
  <div class="slide demo" data-slide="14" data-notes="<strong>DEMO TIME.</strong> Pass the phone around. Let people feel the haptics. This is the moment that sells it — Figma prototypes lag, this feels real. Give people time with it.">
    <div class="demo-badge"><span class="pulse"></span>Live Demo</div>
    <h2>pass it around.<br>let them feel the haptics.</h2>
    <p class="subtitle" style="margin-top:20px">figma prototypes are great but they lag. this just feels like an actual app.</p>
    <div class="divider"></div>
    <p class="subtitle" style="color:var(--amber)">accelerometers. gesture physics. native scroll inertia. all out of the box, just from building in the real framework.</p>
  </div>

  <!-- 16 · This presentation -->
  <div class="slide" data-slide="15" data-notes="<strong>Meta moment.</strong> This presentation is also something I built with these tools. Single HTML file, all the features. The tool builds its own showcase. Get a smile from the room.">
    <div class="eyebrow amber">side project 01</div>
    <h2>this presentation<br>is also one of the<br>things I built.</h2>
    <div class="divider"></div>
    <p class="subtitle">single HTML file. keyboard navigation, slide grid overview, drag-and-drop media, light/dark mode. built with Claude Code in a few sessions.</p>
    <p class="subtitle" style="margin-top:16px;color:var(--text)">the tool builds its own showcase.</p>
  </div>

  <!-- 18 · Design Studio tracker -->
  <div class="slide" data-slide="17" data-steps="2" data-notes="<strong>Side project 3.</strong> Built on the side while other things were compiling. A real personal use case — tracking books and decor for the design studio. Quick build, immediately useful. The point: these tools let you scratch your own itches without breaking stride.">
    <div class="eyebrow amber">side project 02</div>
    <h2>needed to track<br>everything I was<br>ordering for the studio.</h2>
    <p class="subtitle step-item" data-step="1" style="margin-top:24px">books, decor, furniture — all going to different places. built a site to collect and track it all. done on the side while other things were running.</p>
    <p class="subtitle step-item" data-step="2" style="margin-top:16px;color:var(--text)">not every project has to be ambitious. sometimes you just need a thing and you build it in an afternoon.</p>
  </div>

  <!-- ═══ CHAPTER 02 ═══ -->

  <div class="slide chapter" data-slide="18" data-notes="Chapter 2 — the 'how.' This is the practical part people will remember.">
    <div class="chapter-num">02 —</div>
    <div class="chapter-line"></div>
    <div class="chapter-title">how I<br>got here.</div>
    <p class="chapter-sub">the way i was prompting changed a lot over three weeks.</p>
  </div>

  <!-- 23 · Evolution grid -->
  <div class="slide" data-slide="22" data-steps="3" data-notes="<strong>The arc.</strong> Reveal each column one at a time. Week 1: reacting — 'build me this, I'll tell you what's wrong.' Week 2: directing — giving references and assets. Week 3: owning — thinking together. Let the audience see themselves in week 1.">
    <div class="eyebrow muted">something i noticed looking back</div>
    <h2>reacting → directing<br>→ owning.</h2>
    <div class="evolution" style="margin-top:36px">
      <div class="evo-col step-item" data-step="1">
        <div class="evo-week">week 1</div>
        <div class="evo-stage">reacting</div>
        <div class="evo-quote">"build me this thing and i'll tell you what's wrong"</div>
      </div>
      <div class="evo-col step-item" data-step="2">
        <div class="evo-week">week 2</div>
        <div class="evo-stage">directing</div>
        <div class="evo-quote">"here's my reference, here are my assets, match this"</div>
      </div>
      <div class="evo-col step-item" data-step="3">
        <div class="evo-week">week 3</div>
        <div class="evo-stage">owning</div>
        <div class="evo-quote">"here's my vision, here are my principles, think with me"</div>
      </div>
    </div>
  </div>

  <!-- 24 · Prompt comparison -->
  <div class="slide" data-slide="23" data-notes="<strong>Concrete evidence.</strong> Left column: vague, reactive. Right column: specific, strategic. The prompts literally tell the story of how your skill evolves. Don't belabor — let the comparison speak for itself.">
    <div class="eyebrow muted">what that actually looked like</div>
    <h2>the prompts tell the story.</h2>
    <div class="comparison" style="margin-top:36px">
      <div class="compare-col bad">
        <span class="compare-label">week one</span>
        <p>"the icons are wrong on the nav"</p>
        <p style="margin-top:12px">"this is not the right size"</p>
        <p style="margin-top:12px">"its still full width"</p>
      </div>
      <div class="compare-col good">
        <span class="compare-label">week three</span>
        <p>"almost. not smooth enough yet. shared transition like an apple ios app"</p>
        <p style="margin-top:12px">"dont do it yet. just a feasibility audit"</p>
      </div>
    </div>
  </div>

  <!-- 25 · Cost / Cursor -->
  <div class="slide" data-slide="24" data-steps="2" data-notes="<strong>The reality check.</strong> Started with Cursor — amazing, but expensive. Thousands per day. They took it away. Vault tracks AI spend. Be intentional. This slide earns trust — you're not just cheerleading.">
    <div class="eyebrow muted">something worth knowing</div>
    <h2>these tools are powerful.<br>they're also expensive.</h2>
    <p class="subtitle step-item" data-step="1" style="margin-top:24px">i started with Cursor because it had access to a model we didn't have in Claude yet. it made things move incredibly fast. we were also spending thousands of dollars a day. they had to take it away.</p>
    <p class="subtitle step-item" data-step="2" style="margin-top:20px;color:var(--text)">if you open Vault right now you'll see an AI spend ticker next to your name. it's real money. be intentional about what you're asking it to do.</p>
  </div>

  <!-- 26 · Plan mode -->
  <div class="slide" data-slide="25" data-steps="2" data-notes="<strong>Practical habit.</strong> Ask it clarifying questions before building. More time upfront = fewer wasted rebuilds. Plan mode in Claude Code does this automatically. This is the #1 tip for reducing cost and frustration.">
    <div class="eyebrow muted">the habit that fixed it</div>
    <h2>spec first.<br>then build.</h2>
    <div class="chat-wrap" style="margin-top:32px">
      <div class="bubble">
        <span class="who you">you</span>
        "before we do anything, ask me a bunch of clarifying questions so we can nail down exactly what we're building"
      </div>
    </div>
    <p class="subtitle step-item" data-step="1" style="margin-top:24px">more time upfront. way fewer wasted rebuilds. the output is better and you end up with something much closer to what you actually wanted.</p>
    <p class="subtitle step-item" data-step="2" style="margin-top:16px;color:var(--text)">plan mode in Claude Code does this automatically. i use it for anything non-trivial now.</p>
  </div>

  <!-- 27 · Directing habits -->
  <div class="slide" data-slide="26" data-steps="3" data-notes="<strong>Three actionable habits.</strong> 1) Component by component — don't boil the ocean. 2) Clean up hourly, push to git early — you'll need somewhere to go back to. 3) Feed it your design system — Ryan and John's docs made everything feel real immediately.">
    <div class="eyebrow muted">a few habits that changed everything</div>
    <h2>things I wish I'd<br>started earlier.</h2>
    <div class="steps" style="margin-top:36px">
      <div class="step step-item" data-step="1">
        <div class="step-num">1</div>
        <div class="step-content">
          <h4>start component by component</h4>
          <p>just the header. get it right, move on. don't try to build the whole screen at once.</p>
        </div>
      </div>
      <div class="step step-item" data-step="2">
        <div class="step-num">2</div>
        <div class="step-content">
          <h4>clean up every hour, push to git early</h4>
          <p>ask it to refactor before going deeper. push way sooner than you think. you'll need somewhere to go back to.</p>
        </div>
      </div>
      <div class="step step-item" data-step="3">
        <div class="step-num">3</div>
        <div class="step-content">
          <h4>feed it your real design system</h4>
          <p>Ryan and John's docs — fonts, radii, transitions. everything felt immediately real.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- 28 · Owning / feasibility audit -->
  <div class="slide" data-slide="27" data-steps="2" data-notes="<strong>Level 3 usage.</strong> Use it to think, not just build. The feasibility audit: 'what would it take to connect the catalog API?' Got back a card-by-card breakdown, effort estimates, risk analysis — no code written. Mapped the prototype to real API constraints before any engineer saw it.">
    <div class="eyebrow muted">week 3 — use it to think, not just to build</div>
    <h2>a thinking partner,<br>not just a code writer.</h2>
    <div class="chat-wrap" style="margin-top:32px">
      <div class="bubble">
        <span class="who you">you</span>
        "what would it take to connect the catalog api so we could pull in real products? dont do it yet. just a feasibility audit"
      </div>
    </div>
    <p class="subtitle step-item" data-step="1" style="margin-top:24px">got back a card-by-card breakdown, effort estimates, full risk analysis. without writing a line of code.</p>
    <p class="subtitle step-item" data-step="2" style="margin-top:12px;color:var(--text)">mapped the whole prototype to real API constraints. before any engineer saw it.</p>
  </div>

  <!-- 29 · Pong debugging -->
  <div class="slide" data-slide="28" data-steps="4" data-notes="<strong>The debugging saga.</strong> Reveal each attempt one at a time. Build the tension. ZStack reorder — nope. Gesture priority — nope. Custom gesture — nope, full revert. Then the 'got it' row: the feed's ScrollView was stealing touches at 38pt but not 74pt. Platform knowledge still matters.">
    <div class="eyebrow red">the pong debugging saga</div>
    <h2>moving the paddle<br>36 points broke everything.</h2>
    <div class="debug-list step-item" data-step="1">
      <div class="debug-row">
        <span class="attempt">attempt 1</span>
        ZStack reorder — still broken
      </div>
    </div>
    <div class="debug-list step-item" data-step="2" style="margin-top:0">
      <div class="debug-row">
        <span class="attempt">attempt 2</span>
        gesture priority — still broken
      </div>
    </div>
    <div class="debug-list step-item" data-step="3" style="margin-top:0">
      <div class="debug-row">
        <span class="attempt">attempt 3</span>
        custom gesture — still broken. full revert.
      </div>
    </div>
    <div class="debug-list step-item" data-step="4" style="margin-top:0">
      <div class="debug-row success">
        <span class="attempt">got it</span>
        the feed's ScrollView was stealing touches. handle works at 74pt but not at 38pt.
      </div>
    </div>
  </div>

  <!-- 30 · Platform understanding -->
  <div class="slide" data-slide="29" data-notes="<strong>Important nuance.</strong> The tool gets you there faster, but you still need to understand the platform. And honestly? That's a relief — your design instincts still matter. This isn't replacing you, it's amplifying you.">
    <h2>even when you're not<br>writing the code, you still<br>have to understand<br>what's happening.</h2>
    <div class="divider"></div>
    <p class="subtitle">the tool gets you there faster. it doesn't replace knowing the platform. and honestly? that's kind of a relief — your design instincts still matter.</p>
  </div>

  <!-- ═══ CHAPTER 03 ═══ -->

  <div class="slide chapter" data-slide="26" data-notes="Chapter 3 — the big takeaway. This is the part you keep telling people about. Land it.">
    <div class="chapter-num">03 —</div>
    <div class="chapter-line"></div>
    <div class="chapter-title">the thing<br>I figured out.</div>
    <p class="chapter-sub">this is the part i keep telling people about.</p>
  </div>

  <!-- 32 · You can teach it your taste -->
  <div class="slide" data-slide="31" data-steps="2" data-notes="<strong>The big insight.</strong> Converted Emil Kowalski's animation tips into a reusable skill. Now it just knows: scale 0.97, under 300ms, ease-out for enter, spring for interactive. These persist across sessions. Teach it once.">
    <h2>you can teach it<br>your taste.</h2>
    <p class="subtitle step-item" data-step="1" style="margin-top:24px">i converted Emil Kowalski's animation tips into a reusable skill. from that point on it just knew things like:</p>
    <div class="cards step-item" data-step="2" style="margin-top:28px;grid-template-columns:repeat(2,1fr);max-width:680px">
      <div class="card">
        <div class="card-title">scale buttons to 0.97 on press</div>
        <div class="card-desc">not 0.95. not 0.98. 0.97.</div>
      </div>
      <div class="card">
        <div class="card-title">keep animations under 300ms</div>
        <div class="card-desc">ease-out for enter. spring for interactive.</div>
      </div>
      <div class="card">
        <div class="card-title">never animate from scale(0)</div>
        <div class="card-desc">start from 0.5 minimum or it feels wrong.</div>
      </div>
      <div class="card">
        <div class="card-title">these persist across sessions</div>
        <div class="card-desc">teach it once. it remembers your principles.</div>
      </div>
    </div>
  </div>

  <!-- 33 · Your taste is the skill -->
  <div class="slide" data-slide="32" data-steps="2" data-notes="<strong>The thesis of the whole talk.</strong> Your taste IS the skill. The tool executes it. Years of knowing what feels right — that's what you bring. You described snappy transitions and it built them in Swift with haptics. The model doesn't have taste. You do. That's what makes the output good.">
    <div class="eyebrow muted">what I mean by that</div>
    <h2>your taste is the skill.<br>the tool executes it.</h2>
    <p class="subtitle step-item" data-step="1" style="margin-top:24px">years of knowing what feels right, what's too slow, what's too fast, what's "shopify" and what isn't — that's the thing you're bringing to this.</p>
    <p class="subtitle step-item" data-step="2" style="margin-top:20px">i spent years mastering smart animate in figma. i know exactly what a snappy transition feels like. so i just described it — and it built it in swift, with haptics, on a real device.</p>
    <p class="subtitle step-item" data-step="2" style="margin-top:16px;color:var(--text)">the model doesn't have taste. you do. that's what makes the output good.</p>
  </div>

  <!-- 34 · We're early / dot graph -->
  <div class="slide" data-slide="33" data-notes="<strong>The waffle chart moment.</strong> Let people scan the dots. 84% of the world has never used AI. We're in the last row — the red dot. We're in an echo chamber. Everyone around us is doing this. Most of the world isn't even close. Let it sink in.">
    <div class="eyebrow muted">feb 2026 — 8.1 billion people</div>
    <h2>it feels like this<br>is everywhere.<br>it really isn't.</h2>
    <div style="display:flex;align-items:flex-start;gap:56px;margin-top:36px">
      <div>
        <div class="waffle-legend">
          <div class="wl-row"><i class="wd wn"></i>never used AI &mdash; 84%</div>
          <div class="wl-row"><i class="wd wf"></i>free chatbot user &mdash; 16%</div>
          <div class="wl-row"><i class="wd wp"></i>pays for AI &mdash; ~0.3%</div>
          <div class="wl-row"><i class="wd wc"></i>uses coding tools &mdash; ~0.04%</div>
        </div>
        <p class="subtitle" style="margin-top:32px">each dot is 3.2 million people.<br><strong style="color:var(--text)">we're in the last row.</strong></p>
        <p class="subtitle" style="margin-top:16px">we're in an echo chamber. everyone around us is doing this. most of the world isn't even close.</p>
      </div>
      <div id="waffle" class="waffle"></div>
    </div>
  </div>

  <!-- 35 · The window will close -->
  <div class="slide" data-slide="34" data-steps="2" data-notes="<strong>Urgency without fear.</strong> The advantage of being early fades. The constraint of not shipping yourself — that's gone right now. Three weeks ago Cursor felt like magic, now working in the terminal. Tools are moving faster than this talk. Very few companies give you this access. Don't waste it.">
    <div class="eyebrow amber">this window will close</div>
    <h2>more people using it<br>means less advantage<br>for being early.</h2>
    <p class="subtitle step-item" data-step="1" style="margin-top:24px">right now, the constraint of not being able to ship things yourself — that's gone. you can build whatever you want. that is not a permanent state of the world.</p>
    <p class="subtitle step-item" data-step="2" style="margin-top:20px">three weeks ago cursor felt like magic. this week i'm working directly in the terminal and i'm not sure i miss the UI at all. the tools are moving faster than this talk.</p>
    <p class="subtitle step-item" data-step="2" style="margin-top:16px;color:var(--text)">very few companies will give you access to all these tools and the space to just go try things. don't waste it.</p>
  </div>

  <!-- 36 · Discussion -->
  <div class="slide discussion" data-slide="35" data-notes="<strong>Open it up.</strong> Go around the room. What would you build in your first session? Give people time to think. If it's quiet, prompt with: 'what's a problem you keep running into that you wish you could just fix yourself?'">
    <div class="discussion-badge">💬 your turn</div>
    <h2>what's something you've<br>been wanting to try<br>but haven't yet?</h2>
    <p class="subtitle" style="margin-top:24px">go around the room. what would you build in your first session?</p>
  </div>

  <!-- 37 · Be vulnerable -->
  <div class="slide" data-slide="36" data-notes="<strong>Bring it back to culture.</strong> You're being vulnerable right now. Invite people to tell you what you're doing wrong. We have a company with low ego and friendly people. Build in public, share rough work.">
    <h2>try to be a little<br>bit vulnerable.</h2>
    <p class="subtitle" style="margin-top:28px">i'm doing this right now. some of you will probably tell me i'm doing things wrong — and that's great, because i want to learn.</p>
    <p class="subtitle" style="margin-top:20px">we have a company full of people with very little ego who are friendly and nice. use that. build in public. share what you're making even when it's rough.</p>
  </div>

  <!-- 38 · Three things -->
  <div class="slide" data-slide="37" data-steps="3" data-notes="<strong>The takeaways.</strong> Reveal one at a time. 1) One hour a day — not to learn, to build. 2) Ask someone to show you their setup — 5 min > hours of tutorials. 3) Remember where we are — this access and latitude is rare. Don't waste it.">
    <div class="eyebrow green">three things</div>
    <h2>if you take one<br>thing from today.</h2>
    <div class="steps">
      <div class="step step-item" data-step="1">
        <div class="step-num">1</div>
        <div class="step-content">
          <h4>carve out one hour a day</h4>
          <p>not to learn. to build. pick something real. that's how you actually get comfortable with this.</p>
        </div>
      </div>
      <div class="step step-item" data-step="2">
        <div class="step-num">2</div>
        <div class="step-content">
          <h4>ask someone to show you their setup</h4>
          <p>five minutes watching someone's actual workflow is worth hours of tutorials.</p>
        </div>
      </div>
      <div class="step step-item" data-step="3">
        <div class="step-num">3</div>
        <div class="step-content">
          <h4>remember where we are</h4>
          <p>this access, these tools, the latitude to experiment — it won't always be like this. use it now.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- 39 · Close -->
  <div class="slide centered" data-slide="38" data-notes="<strong>End on emotion.</strong> Let the quote land. Pause. 'Just get excited about this. Because I am.' Hold for a beat. Thank the room.">
    <p class="big-quote">"I felt behind.<br>Then I built the thing.<br>Now I feel like I'm<br>just getting started."</p>
    <div class="divider"></div>
    <p class="subtitle">just get excited about this. because I am.</p>
  </div>

</div>

<script>
  let slides = document.querySelectorAll('.slide');
  let total = slides.length;

  function refreshSlides() {
    slides = document.querySelectorAll('.slide');
    total = slides.length;
  }
  let current = 0;
  let currentStep = 0;

  function maxSteps(el) { return parseInt(el.dataset.steps || '0'); }

  function revealStep(el, step) {
    el.querySelectorAll(`.step-item[data-step="${step}"]`).forEach((item, i) => {
      setTimeout(() => item.classList.add('visible'), i * 90);
    });
  }

  function goTo(index) {
    saveCanvasSlide(current);
    slides[current].classList.remove('active');
    current = Math.max(0, Math.min(index, total - 1));
    currentStep = 0;
    const next = slides[current];
    next.querySelectorAll('.step-item').forEach(el => el.classList.remove('visible'));
    next.classList.add('active');
    updateChrome();
    loadCanvasSlide(current);
  }

  function advance() {
    const el = slides[current];
    const max = maxSteps(el);
    if (currentStep < max) {
      currentStep++;
      revealStep(el, currentStep);
    } else if (current < total - 1) {
      goTo(current + 1);
    }
  }

  function retreat() {
    if (current > 0) goTo(current - 1);
  }

  function updateChrome() {
    document.getElementById('progress').style.width = `${((current + 1) / total) * 100}%`;
    document.getElementById('counter').textContent = `${current + 1} / ${total}`;
  }

  document.getElementById('prev-btn').addEventListener('click', e => { e.stopPropagation(); retreat(); });
  document.getElementById('next-btn').addEventListener('click', e => { e.stopPropagation(); advance(); });

  document.addEventListener('keydown', e => {
    if (e.key === 'Escape') { closeGrid(); return; }
    if (document.getElementById('grid-overlay')) return;
    if (isEditing) return;
    if (['ArrowRight', 'ArrowDown', ' '].includes(e.key)) { e.preventDefault(); advance(); }
    if (['ArrowLeft', 'ArrowUp'].includes(e.key)) { e.preventDefault(); retreat(); }
  });

  let tx = 0;
  document.addEventListener('touchstart', e => { tx = e.touches[0].clientX; }, { passive: true });
  document.addEventListener('touchend', e => {
    const dx = tx - e.changedTouches[0].clientX;
    if (Math.abs(dx) > 50) dx > 0 ? advance() : retreat();
  });

  document.getElementById('theme-btn').addEventListener('click', e => {
    e.stopPropagation();
    document.body.classList.toggle('light');
  });

  // ── grid overview ──
  document.getElementById('grid-btn').addEventListener('click', e => { e.stopPropagation(); openGrid(); });

  function makeBlankSlideElement() {
    const el = document.createElement('div');
    el.className = 'slide blank-slide';
    el.innerHTML = `<div class="blank-hint"><div class="blank-hint-icon">+</div><p>drag &amp; drop media, or use the + button</p></div>`;
    return el;
  }

  function saveBlankSlides() {
    const positions = [...document.querySelectorAll('.slide')]
      .map((s, i) => s.classList.contains('blank-slide') ? i : null)
      .filter(x => x !== null);
    localStorage.setItem('blank-slides', JSON.stringify(positions));
  }

  function deleteSlide(index) {
    if (slides.length <= 1) return;
    const allSlides = document.querySelectorAll('.slide');
    allSlides[index].remove();
    dbRemove(index);
    delete slideMedia[index];
    refreshSlides();
    saveBlankSlides();
    closeGrid();
    setTimeout(() => goTo(Math.min(current, slides.length - 1)), 260);
  }

  function insertBlankSlide(afterIndex) {
    const allSlides = document.querySelectorAll('.slide');
    const ref = allSlides[afterIndex];
    const newSlide = makeBlankSlideElement();
    ref.parentNode.insertBefore(newSlide, ref.nextSibling);
    refreshSlides();
    saveBlankSlides();
    closeGrid();
    setTimeout(() => goTo(afterIndex + 1), 260);
  }

  function openGrid() {
    if (document.getElementById('grid-overlay')) return;
    const W = window.innerWidth, H = window.innerHeight;
    const cols = window.innerWidth < 600 ? 3 : window.innerWidth < 900 ? 5 : 7, gap = 10, pad = 52;
    const thumbW = Math.floor((W - pad * 2 - gap * (cols - 1)) / cols);
    const thumbH = Math.floor(thumbW * H / W);
    const scale = thumbW / W;

    const overlay = document.createElement('div');
    overlay.id = 'grid-overlay';
    const grid = document.createElement('div');
    grid.id = 'grid-container';

    slides.forEach((slide, i) => {
      const wrap = document.createElement('div');
      wrap.className = 'thumb-wrap' + (i === current ? ' thumb-current' : '');
      wrap.style.cssText = `width:${thumbW}px;height:${thumbH}px`;

      const clip = document.createElement('div');
      clip.className = 'thumb-clip';

      const clone = slide.cloneNode(true);
      clone.classList.add('thumb-slide');
      clone.classList.remove('active');
      clone.style.cssText = `width:${W}px;height:${H}px;transform:scale(${scale});opacity:1;transition:none;inset:auto`;
      clone.querySelectorAll('.step-item').forEach(el => el.classList.add('visible'));
      clone.querySelectorAll('video').forEach(v => { v.muted = true; v.autoplay = false; });
      clip.appendChild(clone);

      const num = document.createElement('div');
      num.className = 'thumb-num';
      num.textContent = i + 1;

      wrap.appendChild(clip);
      wrap.appendChild(num);

      const ins = document.createElement('button');
      ins.className = 'thumb-insert';
      ins.title = 'Insert blank slide after';
      ins.innerHTML = '<span class="ins-dot">+</span>';
      ins.addEventListener('click', e => { e.stopPropagation(); insertBlankSlide(i); });
      wrap.appendChild(ins);

      const del = document.createElement('button');
      del.className = 'thumb-delete';
      del.title = 'Delete slide';
      del.textContent = '×';
      del.addEventListener('click', e => { e.stopPropagation(); deleteSlide(i); });
      wrap.appendChild(del);

      wrap.addEventListener('click', () => { closeGrid(); setTimeout(() => goTo(i), 160); });
      grid.appendChild(wrap);

      setTimeout(() => wrap.classList.add('in'), 20 + i * 16);
    });

    overlay.appendChild(grid);
    overlay.addEventListener('click', e => { if (e.target === overlay || e.target === grid) closeGrid(); });
    document.body.appendChild(overlay);
    requestAnimationFrame(() => overlay.classList.add('visible'));
  }

  function closeGrid() {
    const overlay = document.getElementById('grid-overlay');
    if (!overlay) return;
    overlay.querySelectorAll('.thumb-wrap').forEach(w => w.classList.remove('in'));
    overlay.classList.remove('visible');
    setTimeout(() => overlay.remove(), 260);
  }


  // ── media ──
  const addBtn = document.getElementById('add-btn');
  const mediaInput = document.getElementById('media-input');
  const slideMedia = {};
  let db = null;

  function dbSave(idx) {
    if (!db) return;
    const items = slideMedia[idx];
    if (!items?.length) { dbRemove(idx); return; }
    const storable = items.map(({ blob, type, x, y, w, h }) => ({ blob, type, x, y, w, h }));
    db.transaction('media', 'readwrite').objectStore('media').put(storable, idx);
  }

  function dbRemove(idx) {
    if (!db) return;
    db.transaction('media', 'readwrite').objectStore('media').delete(idx);
  }

  addBtn.addEventListener('click', () => mediaInput.click());

  mediaInput.addEventListener('change', e => {
    const file = e.target.files[0];
    if (!file) return;
    const url = URL.createObjectURL(file);
    const type = file.type.startsWith('video') ? 'video' : 'image';
    if (!slideMedia[current]) slideMedia[current] = [];
    const item = { type, url, blob: file };
    slideMedia[current].push(item);
    renderMediaItem(current, item);
    dbSave(current);
    mediaInput.value = '';
  });

  function renderMedia(idx) {
    const slide = slides[idx];
    slide.querySelectorAll('.slide-media').forEach(el => el.remove());
    if (!slideMedia[idx]?.length) return;
    slideMedia[idx].forEach(item => renderMediaItem(idx, item));
  }

  function renderMediaItem(idx, item) {
    const slide = slides[idx];
    slide.querySelector('.blank-hint')?.remove();

    const wrap = document.createElement('div');
    wrap.className = 'slide-media';

    if (item.type === 'video') {
      const v = document.createElement('video');
      v.src = item.url; v.autoplay = true; v.loop = true; v.muted = true; v.playsInline = true;
      wrap.appendChild(v);
    } else {
      const img = document.createElement('img');
      img.src = item.url;
      wrap.appendChild(img);
    }

    const rm = document.createElement('button');
    rm.className = 'media-remove'; rm.textContent = '×';
    rm.addEventListener('click', e => {
      e.stopPropagation();
      slideMedia[idx] = slideMedia[idx].filter(i => i !== item);
      if (!slideMedia[idx].length) delete slideMedia[idx];
      dbSave(idx);
      wrap.remove();
    });
    wrap.appendChild(rm);

    const offset = (slideMedia[idx].indexOf(item)) * 24;
    const x = item.x ?? (window.innerWidth * 0.54 + offset);
    const y = item.y ?? (window.innerHeight * 0.5 - 160 + offset);
    item.x = item.x ?? x;
    item.y = item.y ?? y;
    wrap.style.left = x + 'px';
    wrap.style.top  = y + 'px';
    if (item.w) { wrap.style.width = item.w + 'px'; wrap.style.maxWidth = 'none'; }
    if (item.h) { wrap.style.height = item.h + 'px'; wrap.style.maxHeight = 'none'; }

    slide.appendChild(wrap);
    makeDraggable(wrap, idx, item);
    makeResizable(wrap, idx, item);
  }

  const waffle = document.getElementById('waffle');
  if (waffle) {
    const segments = [
      { cls: 'wn', count: 2091 },
      { cls: 'wf', count: 400 },
      { cls: 'wp', count: 8 },
      { cls: 'wc', count: 1 },
    ];
    waffle.innerHTML = segments.flatMap(({ cls, count }) =>
      Array(count).fill(`<i class="wd ${cls}"></i>`)
    ).join('');
  }

  function makeResizable(el, idx, item) {
    const handle = document.createElement('div');
    handle.className = 'media-resize';
    el.appendChild(handle);

    handle.addEventListener('mousedown', e => {
      e.preventDefault(); e.stopPropagation();
      const startX = e.clientX;
      const startW = el.offsetWidth;
      const media = el.querySelector('img, video');
      const nw = media?.naturalWidth || media?.videoWidth || startW;
      const nh = media?.naturalHeight || media?.videoHeight || el.offsetHeight;
      const ratio = nh / nw;

      const onMove = e => {
        const w = Math.max(80, startW + (e.clientX - startX));
        const h = Math.round(w * ratio);
        el.style.width = w + 'px'; el.style.height = h + 'px';
        el.style.maxWidth = 'none'; el.style.maxHeight = 'none';
        item.w = w; item.h = h;
      };
      const onUp = () => {
        document.removeEventListener('mousemove', onMove);
        document.removeEventListener('mouseup', onUp);
        dbSave(idx);
      };
      document.addEventListener('mousemove', onMove);
      document.addEventListener('mouseup', onUp);
    });
  }

  // ── drag from desktop ──
  const dropOverlay = document.getElementById('drop-overlay');
  let dragCounter = 0;

  document.addEventListener('dragenter', e => {
    if (e.dataTransfer.types.includes('Files')) {
      dragCounter++;
      dropOverlay.classList.add('visible');
    }
  });
  document.addEventListener('dragleave', () => {
    if (--dragCounter <= 0) { dragCounter = 0; dropOverlay.classList.remove('visible'); }
  });
  document.addEventListener('dragover', e => {
    if (e.dataTransfer.types.includes('Files')) { e.preventDefault(); e.dataTransfer.dropEffect = 'copy'; }
  });
  document.addEventListener('drop', e => {
    e.preventDefault();
    dragCounter = 0; dropOverlay.classList.remove('visible');
    const file = e.dataTransfer.files[0];
    if (!file || (!file.type.startsWith('image/') && !file.type.startsWith('video/'))) return;
    const url = URL.createObjectURL(file);
    const type = file.type.startsWith('video') ? 'video' : 'image';
    if (!slideMedia[current]) slideMedia[current] = [];
    const item = { type, url, blob: file, x: e.clientX - 160, y: e.clientY - 100 };
    slideMedia[current].push(item);
    renderMediaItem(current, item);
    dbSave(current);
  });

  let selectedMedia = null;

  function selectMedia(el) {
    if (selectedMedia) selectedMedia.classList.remove('selected');
    selectedMedia = el;
    el.classList.add('selected');
    updateLayerBadges();
  }

  function deselectMedia() {
    if (selectedMedia) selectedMedia.classList.remove('selected');
    selectedMedia = null;
  }

  function updateLayerBadges() {
    const slide = slides[current];
    const mediaEls = [...slide.querySelectorAll('.slide-media')];
    mediaEls.forEach((el, i) => {
      let badge = el.querySelector('.media-layer-badge');
      if (!badge) {
        badge = document.createElement('div');
        badge.className = 'media-layer-badge';
        el.appendChild(badge);
      }
      badge.textContent = `${i + 1} / ${mediaEls.length}`;
    });
  }

  // deselect when clicking outside media
  document.addEventListener('mousedown', e => {
    if (!e.target.closest('.slide-media')) deselectMedia();
  });

  function makeDraggable(el, idx, item) {
    el.addEventListener('mousedown', e => {
      if (e.target.closest('.media-remove') || e.target.closest('.media-resize')) return;
      e.preventDefault(); e.stopPropagation();
      selectMedia(el);

      const startX = e.clientX, startY = e.clientY;
      const startL = parseFloat(el.style.left), startT = parseFloat(el.style.top);
      el.classList.add('dragging');

      const guideH = document.createElement('div');
      guideH.className = 'snap-guide h';
      const guideV = document.createElement('div');
      guideV.className = 'snap-guide v';
      document.body.appendChild(guideH);
      document.body.appendChild(guideV);

      const SNAP = 8;
      const CX = window.innerWidth / 2, CY = window.innerHeight / 2;

      const onMove = e => {
        let l = startL + (e.clientX - startX);
        let t = startT + (e.clientY - startY);

        const cx = l + el.offsetWidth / 2;
        const cy = t + el.offsetHeight / 2;

        if (Math.abs(cx - CX) < SNAP) { l = CX - el.offsetWidth / 2; guideV.classList.add('visible'); }
        else { guideV.classList.remove('visible'); }

        if (Math.abs(cy - CY) < SNAP) { t = CY - el.offsetHeight / 2; guideH.classList.add('visible'); }
        else { guideH.classList.remove('visible'); }

        el.style.left = l + 'px';
        el.style.top  = t + 'px';
        item.x = l;
        item.y = t;
      };
      const onUp = () => {
        el.classList.remove('dragging');
        guideH.remove();
        guideV.remove();
        document.removeEventListener('mousemove', onMove);
        document.removeEventListener('mouseup', onUp);
        dbSave(idx);
      };
      document.addEventListener('mousemove', onMove);
      document.addEventListener('mouseup', onUp);
    });
  }

  // restore blank slides from previous session
  (function() {
    const saved = JSON.parse(localStorage.getItem('blank-slides') || '[]');
    saved.sort((a, b) => a - b).forEach(pos => {
      const all = document.querySelectorAll('.slide');
      const newSlide = makeBlankSlideElement();
      if (pos >= all.length) {
        all[all.length - 1].parentNode.appendChild(newSlide);
      } else {
        all[pos].parentNode.insertBefore(newSlide, all[pos]);
      }
    });
    if (saved.length) refreshSlides();
  })();

  // ── inline text editing ──
  const EDITABLE = 'h1, h2, h3, h4, p, .eyebrow, .chapter-title, .chapter-sub, .big-quote, .card-title, .card-desc';

  function tagEditables() {
    let i = 0;
    document.querySelectorAll('#deck ' + EDITABLE).forEach(el => {
      if (!el.dataset.eid) el.dataset.eid = 'e' + (i++);
    });
  }

  function saveTextEdit(eid, html) {
    const edits = JSON.parse(localStorage.getItem('slide-text-edits') || '{}');
    edits[eid] = html;
    localStorage.setItem('slide-text-edits', JSON.stringify(edits));
  }

  function restoreTextEdits() {
    const edits = JSON.parse(localStorage.getItem('slide-text-edits') || '{}');
    Object.entries(edits).forEach(([eid, html]) => {
      const el = document.querySelector(`[data-eid="${eid}"]`);
      if (el) el.innerHTML = html;
    });
  }

  let isEditing = false;

  document.getElementById('deck').addEventListener('click', e => {
    const el = e.target.closest(EDITABLE);
    if (!el || !el.closest('.slide') || el.isContentEditable) return;
    e.stopPropagation();
    el.contentEditable = 'true';
    el.focus();
    isEditing = true;
    el.addEventListener('blur', () => {
      el.contentEditable = 'false';
      isEditing = false;
      if (el.dataset.eid) saveTextEdit(el.dataset.eid, el.innerHTML);
    }, { once: true });
    el.addEventListener('keydown', e => {
      if (e.key === 'Escape') { e.preventDefault(); el.blur(); }
    });
  });

  tagEditables();
  restoreTextEdits();

  updateChrome();

  // persist media across sessions via IndexedDB
  const dbReq = indexedDB.open('lunch-learn-media', 1);
  dbReq.onupgradeneeded = e => e.target.result.createObjectStore('media');
  dbReq.onsuccess = e => {
    db = e.target.result;
    const req = db.transaction('media', 'readonly').objectStore('media').openCursor();
    req.onsuccess = e => {
      const cursor = e.target.result;
      if (!cursor) return;
      const data = cursor.value;
      const items = Array.isArray(data) ? data : [data];
      slideMedia[cursor.key] = items.map(d => ({ ...d, url: URL.createObjectURL(d.blob) }));
      renderMedia(cursor.key);
      cursor.continue();
    };
  };

  // ── pen / draw mode ──
  const drawCanvas = document.getElementById('draw-canvas');
  const ctx = drawCanvas.getContext('2d');
  const penBtn = document.getElementById('pen-btn');
  const clearBtn = document.getElementById('clear-btn');
  let penMode = false;
  let drawing = false;
  let lastX = 0, lastY = 0;
  const drawData = {};

  drawCanvas.width = window.innerWidth;
  drawCanvas.height = window.innerHeight;
  ctx.strokeStyle = '#ffffff';
  ctx.lineWidth = 3;
  ctx.lineCap = 'round';
  ctx.lineJoin = 'round';

  function saveCanvasSlide(idx) {
    if (!drawCanvas.width) return;
    drawData[idx] = drawCanvas.toDataURL();
    localStorage.setItem('draw-' + idx, drawData[idx]);
  }

  function loadCanvasSlide(idx) {
    ctx.clearRect(0, 0, drawCanvas.width, drawCanvas.height);
    const saved = drawData[idx] || localStorage.getItem('draw-' + idx);
    if (saved) {
      const img = new Image();
      img.onload = () => ctx.drawImage(img, 0, 0);
      img.src = saved;
      drawData[idx] = saved;
    }
  }

  penBtn.addEventListener('click', e => {
    e.stopPropagation();
    penMode = !penMode;
    document.body.classList.toggle('pen-mode', penMode);
    penBtn.classList.toggle('pen-active', penMode);
    clearBtn.style.display = penMode ? '' : 'none';
  });

  clearBtn.addEventListener('click', e => {
    e.stopPropagation();
    ctx.clearRect(0, 0, drawCanvas.width, drawCanvas.height);
    delete drawData[current];
    localStorage.removeItem('draw-' + current);
  });

  document.addEventListener('keydown', e => {
    if (e.target.isContentEditable || isEditing) return;
    if (e.key === 'p' && document.activeElement.tagName !== 'INPUT') {
      penBtn.click();
    }
    // bracket keys to reorder selected media layers
    if ((e.key === '[' || e.key === ']') && selectedMedia) {
      e.preventDefault();
      const slide = slides[current];
      const mediaEls = [...slide.querySelectorAll('.slide-media')];
      const i = mediaEls.indexOf(selectedMedia);
      if (i === -1) return;
      const items = slideMedia[current];
      if (!items) return;

      if (e.key === ']' && i < mediaEls.length - 1) {
        // move up: swap with next sibling in DOM
        selectedMedia.parentNode.insertBefore(mediaEls[i + 1], selectedMedia);
        // swap in data array
        [items[i], items[i + 1]] = [items[i + 1], items[i]];
      } else if (e.key === '[' && i > 0) {
        // move down: swap with previous sibling in DOM
        selectedMedia.parentNode.insertBefore(selectedMedia, mediaEls[i - 1]);
        // swap in data array
        [items[i], items[i - 1]] = [items[i - 1], items[i]];
      }
      updateLayerBadges();
      dbSave(current);
    }
  });

  drawCanvas.addEventListener('mousedown', e => {
    if (!penMode) return;
    drawing = true;
    lastX = e.clientX; lastY = e.clientY;
    ctx.beginPath();
    ctx.moveTo(lastX, lastY);
  });

  drawCanvas.addEventListener('mousemove', e => {
    if (!drawing) return;
    ctx.lineTo(e.clientX, e.clientY);
    ctx.stroke();
    lastX = e.clientX; lastY = e.clientY;
  });

  drawCanvas.addEventListener('mouseup', () => {
    drawing = false;
    saveCanvasSlide(current);
  });

  drawCanvas.addEventListener('mouseleave', () => { drawing = false; });

  loadCanvasSlide(0);

  // ── speaker notes ──
  const notesBar = document.getElementById('notes-bar');
  const notesText = document.getElementById('notes-text');
  let notesVisible = false;

  function updateNotes() {
    const notes = slides[current]?.dataset.notes || '';
    notesText.innerHTML = notes || '<em style="color:var(--muted)">No notes for this slide.</em>';
  }

  document.addEventListener('keydown', e => {
    if (e.key === 'n' && !e.target.isContentEditable && document.activeElement.tagName !== 'INPUT') {
      notesVisible = !notesVisible;
      notesBar.classList.toggle('visible', notesVisible);
      if (notesVisible) updateNotes();
    }
  });

  // patch goTo to update notes
  const _origGoTo = goTo;
  goTo = function(index) {
    _origGoTo(index);
    if (notesVisible) updateNotes();
  };

  // ── letter font scramble ──
  (function() {
    const FONTS = [
      '"Times New Roman", serif',
      '"Courier New", monospace',
      'Georgia, serif',
      'Impact, sans-serif',
      '"Comic Sans MS", cursive',
      'Verdana, sans-serif',
      'Palatino, serif',
      '"Trebuchet MS", sans-serif',
      '"Brush Script MT", cursive',
      '"Lucida Console", monospace',
      '"Arial Black", sans-serif',
      'Garamond, serif',
      '"Baskerville", serif',
      '"Copperplate", fantasy',
      'fantasy',
      'cursive',
      '"Gill Sans", sans-serif',
      '"Rockwell", serif',
      '"American Typewriter", serif',
      '"Optima", sans-serif',
    ];

    function applyScramble(el, lockSizes) {
      if (!el) return;
      el.innerHTML = el.innerHTML
        .replace(/(<br\s*\/?>)/gi, '§§')
        .split('§§')
        .map(seg => seg.split('').map(ch =>
          ch === ' ' ? ' ' : `<span class="title-letter">${ch}</span>`
        ).join(''))
        .join('<br>');

      if (lockSizes) {
        requestAnimationFrame(() => {
          el.querySelectorAll('.title-letter').forEach(s => {
            const r = s.getBoundingClientRect();
            s.style.width  = r.width  + 'px';
            s.style.height = r.height + 'px';
          });
        });
      }

      el.querySelectorAll('.title-letter').forEach(span => {
        let timer = null;
        span.addEventListener('mouseenter', () => {
          span.classList.add('lifted');
          const cycle = () => {
            span.style.fontFamily = FONTS[Math.floor(Math.random() * FONTS.length)];
            timer = setTimeout(cycle, 45 + Math.random() * 35);
          };
          cycle();
        });
        span.addEventListener('mouseleave', () => {
          span.classList.remove('lifted');
          clearTimeout(timer);
          timer = null;
          span.style.fontFamily = '';
        });
      });
    }

    applyScramble(slides[0].querySelector('h1'), true);
    applyScramble(document.querySelector('[data-slide="15"] h2'), false);
  })();
</script>
</body>
</html>
